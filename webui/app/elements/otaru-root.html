<link rel="import" href="/bower_components/paper-drawer-panel/paper-drawer-panel.html">
<link rel="import" href="/elements/otaru-status.html">
<link rel="import" href="/elements/otaru-menu.html">
<link rel="import" href="/elements/otaru-blobstore.html">

<dom-module id="otaru-root">
  <style>
    paper-drawer-panel {
      font-family: 'Source Code Pro', Menlo, Consolas, Monaco, monospace;
    }

    h1,h2,h3,h4,h5 {
      margin: 5px 0; 
    }

    h1 {
      font-size: 24pt; 
      padding-left: 20px;
      color: #eee;
    }

    h2 {
      margin: 0;
      border-bottom: 1px solid black;
      padding: 8px 20px;

      background-color: #eee;
    }

    h3 {
      padding: 5px 0;

      color: #333;
    }

    paper-drawer-panel {
      --paper-drawer-panel-left-drawer-container: {
        background-color: #888;
        box-shadow: inset -3px 0px 5px 0px rgba(0,0,0,0.1);
      };
    }

    #mainpanel [main] {
    }
  </style>
  <template> 
    <paper-drawer-panel id='mainpanel'>
      <div drawer>
        <h1>Otaru</h1>
        <otaru-status></otaru-status>
        <otaru-menu id='menu' attr-for-selected='val' selected='{{activeTab}}'>
          <otaru-menu-item val='blobstore'>Blobstore</otaru-menu-item> 
          <otaru-menu-item val='inodedb'>INodeDB</otaru-menu-item> 
          <otaru-menu-item val='inspect'>Inspect</otaru-menu-item> 
        </otaru-menu>
      </div>
      <div main>
        <h2>CachedBlobStore</h2>
        <div id='page'></div>
      </div>
    </paper-drawer-panel>
  </template>
</dom-module>
<script>
(function() {
"use strict";

Polymer({
  is: 'otaru-root',
  properties: {
    activeTab: {
      observer: '_activeTabChanged' 
    },
  },
  ready() {
    this.$.menu.select('blobstore');
  },
  _activeTabChanged(newValue, oldValue) {
    if (newValue == oldValue) return;

    let pageDiv = this.$.page;
    if (pageDiv.firstChild) {
      pageDiv.removeChild(pageDiv.firstChild);
    }

    let pageTagName = 'otaru-'+this.$.menu.selected;
    let pageTag = document.createElement(pageTagName);
    pageDiv.appendChild(pageTag);
  }
});
})();
</script>
